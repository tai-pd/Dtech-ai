import React, { useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { ChevronRight, Phone, ShoppingCart, ChevronLeft, Star } from 'lucide-react';
import { featuredProducts } from '../productData';
import { companyInfo } from '../mockData';

const EnhancedProductDetailPage = () => {
  const { slug } = useParams();
  const navigate = useNavigate();
  const product = featuredProducts.find(p => p.slug === slug);
  const [selectedImage, setSelectedImage] = useState(0);

  if (!product) {
    return (
      <div className=\"flex-1 flex items-center justify-center min-h-screen bg-gray-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Không tìm thấy sản phẩm</h2>\n          <button\n            onClick={() => navigate('/')}\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Quay về trang chủ\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const relatedProducts = featuredProducts\n    .filter(p => p.category === product.category && p.id !== product.id)\n    .slice(0, 4);\n\n  return (\n    <div className=\"flex-1 bg-gray-50\">\n      {/* Breadcrumb */}\n      <div className=\"bg-white border-b\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center space-x-2 text-sm\">\n            <button onClick={() => navigate('/')} className=\"text-gray-600 hover:text-blue-600 transition-colors\">\n              Trang chủ\n            </button>\n            <ChevronRight className=\"w-4 h-4 text-gray-400\" />\n            <span className=\"text-gray-600\">{product.category}</span>\n            <ChevronRight className=\"w-4 h-4 text-gray-400\" />\n            <span className=\"text-gray-900 font-medium\">{product.name}</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Product Header */}\n        <div className=\"bg-white rounded-xl shadow-md p-8 mb-8\">\n          <div className=\"mb-4\">\n            <span className=\"px-4 py-2 bg-blue-100 text-blue-600 text-sm font-semibold rounded-full\">\n              {product.category}\n            </span>\n          </div>\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">{product.name}</h1>\n          <div className=\"flex items-center space-x-2 mb-6\">\n            <span className=\"text-lg font-semibold text-gray-700\">Nhà sản xuất:</span>\n            <span className=\"text-lg text-blue-600 font-bold\">{product.manufacturer}</span>\n          </div>\n          \n          <div className=\"prose max-w-none\">\n            <p className=\"text-lg text-gray-700 leading-relaxed\">{product.fullDescription}</p>\n          </div>\n\n          {/* Product Main Image */}\n          <div className=\"mt-8\">\n            <img\n              src={product.image}\n              alt={product.name}\n              className=\"w-full max-w-3xl mx-auto rounded-xl shadow-lg\"\n            />\n            <p className=\"text-center text-sm text-gray-500 mt-3\">\n              Hình ảnh: {product.name}, ACB, MCCB, MCB, Contactor, Ro le nhiệt {product.brand}\n            </p>\n          </div>\n        </div>\n\n        {/* Product Lines Section */}\n        {product.productLines && product.productLines.length > 0 && (\n          <div className=\"space-y-8\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">\n              DTech cung cấp các dòng sản phẩm hạ thế của {product.brand} gồm có:\n            </h2>\n\n            {product.productLines.map((line, lineIndex) => (\n              <div key={line.id} className=\"bg-white rounded-xl shadow-md overflow-hidden\">\n                <div className=\"p-8\">\n                  {/* Product Line Title */}\n                  <h3 className=\"text-2xl font-bold text-blue-600 mb-2\">{line.title}</h3>\n                  <p className=\"text-lg text-gray-600 italic mb-4\">{line.subtitle}</p>\n                  <p className=\"text-gray-700 mb-6\">{line.description}</p>\n\n                  {/* Product Line Image */}\n                  <div className=\"mb-8\">\n                    <img\n                      src={line.image}\n                      alt={line.title}\n                      className=\"w-full max-w-2xl mx-auto rounded-lg shadow-md\"\n                    />\n                    <p className=\"text-center text-sm text-gray-500 mt-3\">\n                      Hình ảnh: {line.title.replace(':', '')}\n                    </p>\n                  </div>\n\n                  {/* Series Details */}\n                  {line.series && line.series.length > 0 && (\n                    <div className=\"space-y-6\">\n                      {line.series.map((series, seriesIndex) => (\n                        <div key={seriesIndex} className=\"border-l-4 border-blue-500 pl-6 py-3 bg-blue-50 rounded-r-lg\">\n                          <h4 className=\"text-lg font-bold text-gray-900 mb-2\">\n                            - {series.name}\n                          </h4>\n                          <p className=\"text-gray-700 mb-2\">{series.specs}</p>\n                          {series.models && (\n                            <p className=\"text-gray-600 text-sm\">{series.models}</p>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Contact CTA */}\n        <div className=\"mt-12 bg-gradient-to-r from-blue-600 to-blue-500 rounded-xl shadow-xl p-8 text-white\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <h3 className=\"text-3xl font-bold mb-4\">Cần tư vấn chi tiết về sản phẩm?</h3>\n            <p className=\"text-xl mb-8 opacity-90\">\n              Đội ngũ kỹ thuật của chúng tôi sẵn sàng hỗ trợ bạn 24/7\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-4\">\n              <a\n                href={`tel:${companyInfo.hotline.replace(/\\s/g, '')}`}\n                className=\"px-8 py-4 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100 transition-all hover:shadow-lg transform hover:-translate-y-0.5 flex items-center space-x-2\"\n              >\n                <Phone className=\"w-5 h-5\" />\n                <span>Gọi ngay: {companyInfo.hotline}</span>\n              </a>\n              <button className=\"px-8 py-4 bg-transparent border-2 border-white text-white rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-all hover:shadow-lg transform hover:-translate-y-0.5 flex items-center space-x-2\">\n                <ShoppingCart className=\"w-5 h-5\" />\n                <span>Yêu cầu báo giá</span>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Related Products */}\n        {relatedProducts.length > 0 && (\n          <div className=\"mt-12\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">Sản phẩm liên quan</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {relatedProducts.map((relProduct) => (\n                <div\n                  key={relProduct.id}\n                  onClick={() => {\n                    navigate(`/product/${relProduct.slug}`);\n                    window.scrollTo({ top: 0, behavior: 'smooth' });\n                  }}\n                  className=\"bg-white rounded-xl shadow-md hover:shadow-xl transition-all cursor-pointer overflow-hidden group\"\n                >\n                  <div className=\"relative h-48 overflow-hidden\">\n                    <img\n                      src={relProduct.image}\n                      alt={relProduct.name}\n                      className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                    />\n                  </div>\n                  <div className=\"p-4\">\n                    <div className=\"flex items-center space-x-1 mb-2\">\n                      {[1, 2, 3, 4, 5].map((star) => (\n                        <Star key={star} className=\"w-4 h-4 fill-yellow-400 text-yellow-400\" />\n                      ))}\n                    </div>\n                    <h3 className=\"font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors\">\n                      {relProduct.name}\n                    </h3>\n                    <p className=\"text-sm text-gray-600 line-clamp-2\">{relProduct.description}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Back Button */}\n        <div className=\"mt-8\">\n          <button\n            onClick={() => navigate('/')}\n            className=\"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors\"\n          >\n            <ChevronLeft className=\"w-5 h-5\" />\n            <span>Quay về trang chủ</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EnhancedProductDetailPage;\n